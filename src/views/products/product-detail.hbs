<div class="row">
    <div class="col-1">
        <div class="ml-4" id="imageID" style="height:500px;width: 100px; Serif;overflow: scroll;">
            {{#each data.image}}
            <img id="{{this}}" class="mt-3 sub-image" style="width: 100px; height: 100px" src="{{this}}" alt="{{this}}">
            {{/each}}
        </div>
    </div>
    <div class="col-5">
        <img id="imageMain" class="mt-3 ml-5" style="width: 100%; height: 550px" {{#each data.image}} src="{{this}}"
            alt="{{this}} {{/each}}">
    </div>
    <div class="col-4 ml-5">
        <div class="mt-5" style="font-size: 26px;">
            <p><strong>[{{data.pid}}] {{data.pro_name}} </strong></p>
            {{#if sold_out}}
            <b><i>OUT OF STOCK</i></b>
            {{/if}}
            <hr style="background-color: black;">
        </div>
        <div style="font-size: 20px;">
            <p>Giá: <strong id="price">{{data.price}}</strong></p>
        </div>
        <div style="font-size: 13px;">
            <p>Hàng trong kho: {{data.amount}}</p>
        </div>
        <form action="/product/{{data.slug}}" method="post">
            <div class="mt-3">
                <label for="amount_buy">Số lượng sản phẩm</label><br>
                <input type="number" name="amount_buy" id="amount_buy" min="1" max="{{data.amount}}" value="1">
            </div>

            <div class="mt-3">
                <input type="text" name="code" id="code" placeholder="Nhập mã khuyến mãi">
                <button type="submit" class="btn btn-discount" style="background-color: var(--color-main);">Xác
                    nhận</button>

            </div>

            <div class="mt-5">
                <span>Tổng Cộng: &nbsp; <strong class="total_price" style="font-size: 20px;"></strong> </span>
            </div>

            <div class="mt-5">
                <button type="submit" class="btn btn-confirm"
                    style="background-color: var(--color-main); width: 400px">Đồng
                    ý</button>
            </div>
            {{!-- <button class="btn btn-confirm mt-5" value="[{{data.pid}}] {{data.pro_name}}"
                style="background-color: var(--color-main); width: 400px" type="button" data-toggle="modal"
                data-target="#exampleModal"> Đồng ý
                <span class="d-none">
                    {{id}}
                </span>
            </button> --}}
        </form>

    </div>
    <div class="col-2">
    </div>
</div>
<!-- Modal Start-->
{{!-- <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Bạn Có Muốn Mua Sản
                    Phẩm ?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Sản phẩm : <strong class="text_pro_name">[{{data.pid}}] {{data.pro_name}} </strong> <br>
                Số lượng : <strong></strong> <br>
                Tổng cộng : <strong></strong>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">
                    Huỷ
                </button>
                <button class="btn btn-confirm" style="background-color: var(--color-main); width: 100px" type="submit">
                    Mua
                </button>


            </div>
        </div>
    </div>
</div> --}}
{{!-- Modal End --}}


<script>
    $(document).ready(function () {
        $('#imageID').each(function () {
            $('.sub-image').click(function () {
                let source = $(this).attr('id').trim();
                $('#imageMain').attr('src', `${source}`).unbind();
            })
        })
        let abc = $('#amount_buy').val()
        let amount = parseInt(abc)
        let price_def = parseInt($('#price').text());
        let total_def = (amount * price_def * 1000).toLocaleString('it-IT', { style: "currency", currency: "VND" })
        $('.total_price').html(total_def)

        $('#amount_buy').on("input", function () {
            var value = this.value;
            let price = parseInt($('#price').text());
            let total = (value * price * 1000).toLocaleString('it-IT', { style: "currency", currency: "VND" })
            $('.total_price').html(total)
        });
    })
</script>