<div class="row">
    <div class="col-1">
        <div class="ml-4" id="imageID" style="height:500px;width: 100px; Serif;overflow: scroll;">
            {{#each data.image}}
            <img id="{{this}}" class="mt-3 sub-image" style="width: 100px; height: 100px" src="{{this}}" alt="{{this}}">
            {{/each}}
        </div>
    </div>
    <div class="col-5">
        <img id="imageMain" class="mt-3 ml-5" style="width: 100%; height: 550px" {{#each data.image}} src="{{this}}"
            alt="{{this}} {{/each}}">
    </div>





    <div class="col-4 ml-5">
        <div class="mt-5" style="font-size: 26px;">
            <p><strong>[{{data.pid}}] {{data.pro_name}} </strong></p>
            {{#if sold_out}}
            <b><i>OUT OF STOCK</i></b>
            {{/if}}
            <hr style="background-color: black;">
        </div>
        <div style="font-size: 20px;">
            <p>Giá: <strong id="price">{{data.price}}</strong></p>
        </div>

        {{!-- <form action="/product/check-discount" method="get">
            <div class="mt-3">
                <label for="code">Nhập mã khuyến mãi</label><br>
                <input type="text" name="code" id="code" placeholder="Nhập mã khuyến mãi">
                <button type="submit" class="btn btn-discount" style="background-color: var(--color-main);">Xác
                    nhận</button>
            </div>
        </form> --}}
        <form action="/product/{{data.slug}}" method="post">
            <div class="mt-3">
                <label for="amount_buy">Số lượng sản phẩm</label><br>
                <input type="number" name="amount_buy" id="amount_buy" min="1" max="100" value="1">
            </div>
            <div class="mt-5">
                <span>Tổng Cộng: &nbsp; <strong class="total_price" style="font-size: 20px;"></strong> </span>
            </div>

            <div class="mt-5">
                <button type="submit" class="btn btn-confirm"
                    style="background-color: var(--color-main); width: 400px">Đồng
                    ý</button>
            </div>
        </form>

    </div>
    <div class="col-2">
    </div>
</div>
<script>
    $(document).ready(function () {
        $('#imageID').each(function () {
            $('.sub-image').click(function () {
                let source = $(this).attr('id').trim();
                $('#imageMain').attr('src', `${source}`).unbind();
            })
        })
        let abc = $('#amount_buy').val()
        let amount = parseInt(abc)
        let price_def = parseInt($('#price').text());
        let total_def = (amount * price_def * 1000).toLocaleString('it-IT', { style: "currency", currency: "VND" })
        $('.total_price').html(total_def)

        $('#amount_buy').on("input", function () {
            var value = this.value;
            let price = parseInt($('#price').text());
            let total = (value * price * 1000).toLocaleString('it-IT', { style: "currency", currency: "VND" })
            $('.total_price').html(total)
        });



    })
</script>